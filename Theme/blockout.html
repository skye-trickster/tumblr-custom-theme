<!DOCTYPE html>
<!--
    BLOCKOUT THEME: A simple and functional theme
    AUTHOR: © SKYE TRICKSTER (Vincent)
    TUMBLR: @mxstball
    GITHUB: @skye-trickster
    VERSION: 1.0.0a
    RELEASE DATE: 1 May 2022
    GET THE THEME: https://github.com/skye-trickster/tumblr-custom-theme

    Please do not remove the credit.
-->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

        
        <!-- COLOR OPTIONS -->
        <meta name="color:Background" content="#111111">
        <meta name="color:Accent Color" content="#56bc8a">
        <meta name="color:Dark Accent Color" content="#0f2017">
        <meta name="color:Text Color" content="white">
        <meta name="color:Subtext Color" content="#808080">
        <meta name="color:Nav Color" content="#333333">
        <meta name="color:Header Border Color" content="white">

        <!-- FONT SIZE -->
        <meta name="select:Font Size" content="15px" title="15px (Default)">
        <meta name="select:Font Size" content="14px" title="14px">
        <meta name="select:Font Size" content="16px" title="16px">
        <meta name="select:Font Size" content="18px" title="18px">
        
        <!-- POST SIZE -->
        <meta name="select:Post Size" content="650px" title="650px (Default)">
        <meta name="select:Post Size" content="500px" title="500px">
        <meta name="select:Post Size" content="600px" title="600px">
        <meta name="select:Post Size" content="700px" title="700px">
        
        <!-- SIDEBAR SIZE -->
        <meta name="select:Sidebar Size" content="350px" title="350px (Default)">
        <meta name="select:Sidebar Size" content="250px" title="250px">
        <meta name="select:Sidebar Size" content="300px" title="300px">
        <meta name="select:Sidebar Size" content="400px" title="400px">
        
        
        <!-- ADDITIONAL TEXT -->
        <meta name="if:Show Subtext" content="1">
        <meta name="text:Subtext" content="Written by Skye">
        
        <!-- SIDENAV VARIABLES -->
        <meta name="if:Show Sidebar" content="1">
        <meta name="text:Updates Title" content="Updates">
        <meta name="text:Updates Tag" content="Tag">
        <meta name="text:Updates Text" content="Feel free to use this to post updates!">

        <meta name="text:Guest Tag Title" content="Guest Tags">
        <meta name="text:Guest Tags" content="red, blue, leaf">
        
        <meta name="text:Main Tag Title" content="Main Tags">
        <meta name="text:Main Tags" content="venusaur, squirtle, charizard">
        
        <link rel="shortcut icon" type="image/png" href="{Favicon}"/> <!-- {Favicon}-->

        <!-- Mobile and normal stylesheets-->
        <link rel="stylesheet" type="text/css" media="all" href="https://static.tumblr.com/7ijwq6x/98Rrb6wo2/style-mobile.css" />
        <link rel="stylesheet" type="text/css" media="all" href="https://static.tumblr.com/7ijwq6x/eo5rb6wnj/style.css" />
        <title>{Title}</title>
        
        <style>
            :root {
                --main-background-color: {color:Background};
                --accent-color: {color:Accent Color};
                --accent-color-dark: {color:Dark Accent Color};
                --main-text-color: {color:Text Color};
                --subtext-color: {color:Subtext Color};
                --font-size: {select:Font Size};
                --nav-color: {color:Nav Color};
                --max-post-list-width: {select:Post Size};
                --sidebar-width: {select:Sidebar Size};
            }
            
            .post-body > * {
                margin-bottom: 10px;
            }
            
            .post-body ul, .post-body ol {
                padding-left: 40px;
            }
            
            .post-controls {
                align-items: center;
            }
            
            .description a {
                color: var(--accent-color);
            }
        
            .post-tags li {
                margin-right: 5px;
            }
            
            .fa-retweet {
                margin: 0 3px;
            }
            
            .featured-photo figcaption > *:last-child {
                margin-bottom: 0;
            }
            
            .photoset img {
                height: 150px;
                object-fit: cover;
            }
            
            .photoset .photo {
                width: 30%;
                margin-left: 3px;
                margin-right: 3px;
                display: flex;
                justify-content: center;
            }
            .quote > h2, .quote > h3 {
                margin: 0;
            }
    
            .audio-embed, .video-embed {
                display: flex;
                justify-content: center;
            }
            
            .asker .asker {
                display: inline;
                font-size: 1em;
            }
            
            .answerer .answerer {
                display: inline;
                font-size: 1em;
            }
            .tumblr-controls-desktop, .information {
                z-index: 3;
            }
            
            .page:visited {
                color:var(--accent-color);
            }
            
            .page:visited:hover {
                color: var(--accent-color-dark);
            }
            
            .title:hover {
                text-decoration: none;
            }
            
            nav a:visited {
                color: var(--subtext-color);
            }
            
            .avatar img {
                border-color: {color:Header Border Color};
            }
            {CustomCSS}
        </style>
    </head>


    <body>

        <header class="heading">

            <div class="information">
                <a href="/" class="title">
                    <h1>{Title}</h1>
                </a>

                <div>
                    {block:ShowHeaderImage}
                    <div class="header-image">
                        <img src="{HeaderImage}" alt="heading image"/>
                    </div>
                    {/block:ShowHeaderImage}
                    
                    <div class="description"> <!--Description-->
                        {block:ShowDescription}
                        <p>{Description}</p>
                        {/block:ShowDescription}
                        {block:IfShowSubtext}
                        <p class="secondary writer"><i class="fa-regular fa-circle-user"></i> {text:Subtext}</p>
                        {/block:IfShowSubtext}
                    </div>
                </div>
                <nav class="navigation"> <!-- Block:pages for custom page navigation-->
                    <ul>
                        <li>
                            <a href="/">
                                <div class="nav-left">
                                    <i class="fa fa-solid fa-house-user"></i>
                                    <p>Home</p>
                                </div>
                                <div class="fa fa-solid fa-arrow-right"></div>
                            </a>
                        </li>
                        {block:AskEnabled}
                        <li>
                            <a href="/ask">
                                <div class="nav-left">
                                    <i class="fa fa-solid fa-circle-question"></i>
                                    <p>Ask</p>
                                </div>
                                <div class="fa fa-solid fa-arrow-right"></div>
                            </a>
                        </li>
                        {/block:AskEnabled}
                        {block:SubmissionsEnabled} 
                        <li>
                            <a href="/submit">
                                <div class="nav-left">
                                    <i class="fa fa-solid fa-envelope"></i>
                                    <p>Submit</p>
                                </div>
                                <div class="fa fa-solid fa-arrow-right"></div>
                            </a>
                        </li>
                        {/block:SubmissionsEnabled} 
                        {block:HasPages}
                            {block:Pages}
                                <li>
                                    <a href="{URL}">
                                        <div class="nav-left">
                                            <i class=""></i>
                                            <p>{Label}</p>
                                        </div>
                                        <div class="fa fa-solid fa-arrow-right"></div>
                                    </a>
                                </li>
                            {/block:Pages}
                        {/block:HasPages}
                    </ul>
                </nav>
            </div>
            <div class="tumblr-controls-desktop">

                <div class="search">

                    <form action="search" method="get">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <input type="text" name="q" placeholder="Search"/>
                    </form>
                </div>

                <div class="controls">

                </div> 
            </div>
        </header>

        <main>
            <div class="post-list">

                <!-- Posts -->
                {block:Posts}
                
                <article class="post post-{PostType}">
                    <header>
{block:Date}
                        <div class="post-info">

                            <div>
                                <a href="{Permalink}">{TimeAgo}</a>
                                {block:RebloggedFrom}
                                    <div class="fa-solid fa-retweet"> </div>
                                    <a href="{ReblogParentURL}">{ReblogParentName}</a>
                                {/block:RebloggedFrom}
                            </div>
                            {block:PinnedPostLabel} 
                            <div class="pin">
                                {PinnedPostLabel}
                            </div>
                            {/block:PinnedPostLabel}
                        </div>
{/block:Date}
                        {block:Title}
                        <h1><a href="{Permalink}">{Title}</a></h1>
                        {/block:Title}
                    </header>
                    <div class="content">
                        {block:Photo}
                        <figure class="featured-photo">
                            <img class="featured" alt="{PhotoAlt}" src="{PhotoURL-HighRes}" />
                        </figure>
                        {/block:Photo}
                        {block:Photoset}
                        <div class="photoset">
                            {block:Photos}
                            <figure class="photo">
                                <img class="featured" alt="{PhotoAlt}" src="{PhotoURL-400}" />
                            </figure>
                            {/block:Photos}
                        </div>
                        {/block:Photoset}
                        {block:Quote}
                        <blockquote class="quote">
                            <h2>“{Quote}”</h2>
                            {block:Source}
                            <h3>-{Source}</h3>
                            {/block:Source}
                        </blockquote>
                        {/block:Quote}
                        {block:Link}
                        <div class="link-wrapper">
                            <a {Target} href="{URL}">
                                <div class="link-thumbnail">
                                    <img src="{Thumbnail}" alt="{Name}"/>
                                </div>
                                <div class="link-details">
                                    <div class="link-title">{Name}</div>
                                    {block:Excerpt}
                                    <div class="link-exerpt">{Excerpt}</div>
                                    {/block:Excerpt}
                                    {block:Author}
                                    <div class="link-author">By: {Author}</div>
                                    {/block:Author}
                                    {block:Host}
                                    <div class="link-host">From: <span class="link-source">{Host}</span></div>
                                    {/block:Host}
                                </div>

                            </a>
                        </div>
                        {/block:Link}
                        {block:Chat}
                            <ul class="conversation">
                                {block:Lines}
                                    <li class="chat-item chat-{Alt}">
                                        {block:Label}
                                        <span class="chat-label">{Label}</span>
                                        {/block:Label}
                                        <span class="chat-text">{Line}</span>
                                    </li>                                
                                {/block:Lines}
                            </ul>
                        {/block:Chat}
                        {block:Audio}
                            {block:AudioEmbed}
                                <div class="audio-embed">
                                    {AudioEmbed}
                                </div>
                            {/block:AudioEmbed}
                        {/block:Audio}
                        {block:Video}
                                <div class="video-embed">
                                    {VideoEmbed-500}
                                </div>
                        {/block:Video}
                        {block:Answer}
                            <div class="question">
                                <div class="ask-contents">
                                    <div class="asker">{Asker} asked:</div>
                                    <div class="asker-question">{Question}</div>
                                </div>

                                <img class="asker-avatar" src="{AskerPortraitURL-96}" alt="">
                            </div>
                        
                            {block:Answerer}
                            <div class="answer">
                                <img class="answerer-avatar" src="{AnswererPortraitURL-96}" alt="">
                                <div class="answer-contents">
                                    <div class="answerer">{Answerer} answered:</div>
                                    <div class="answerer-answer">{Answer}</div>
                                </div>
                            </div>
                            {/block:Answerer}

                            <div class="replies">
                                {Replies}
                            </div>
                        {/block:Answer}
                        <div class="post-body">
                            {block:Link}
                                {Description}
                            {/block:Link}
                            {Caption}
                            {Body}
                        </div>


                    </div>
                    <footer>

                        <ul class="post-tags"> 
                            {block:HasTags}
                            {block:Tags}
                                <li><a href="{TagURL}">#{Tag}</a></li>
                            {/block:Tags}
                            {/block:HasTags}
                        </ul>


                        <div class="post-controls">
                            {LikeButton color="white"}
                            {ReblogButton color="white"}
                        </div> 
                    </footer>
                </article>

                {/block:Posts}

            </div> <!-- /post-list -->

            <!-- Navigation -->
            {block:Pagination}
            <div class="pagination">
                {block:PreviousPage}
                <a href="{PreviousPage}" class="page previous-page">
                    <p>Previous</p>
                </a>
                {/block:PreviousPage}

                {block:NextPage}
                <a href="{NextPage}" class="page next-page">
                    <p>Next</p>
                </a>
                {/block:NextPage}
            </div>
            {/block:Pagination}

        </main>
        
        {block:ifShowSidebar}
        <aside>
            <div id="menu" class="menu">
                <i class="fa-solid fa-bars fa-xl"></i>
            </div>


            <div id="sidenav" class="sidenav">
                <div class="updates">
                    <h2><a href="/tagged/{text:Updates Tag}">{text:Updates Title}</a></h2>
                    <p>{text:Updates Text}</p>
                </div>
                <div class="trending">
                    <div class="trend-title">
                        <i class="icon fa-solid fa-chevron-up"></i>
                        <h2>{text:Guest Tag Title}</h2>
                    </div>
                    <div class="trend-tags">
                    </div>
                </div>
                <div class="trending">
                    <div class="trend-title">
                        <i class="icon fa-solid fa-chevron-up"></i>
                        <h2>{text:Main Tag Title}</h2>
                    </div>
                    <div class="trend-tags"></div>
                </div>
            </div>
        </aside>
        {/block:ifShowSidebar}        

        <footer class="footer">
            
            <a href="/" class="avatar">
                <img src="{PortraitURL-96}" alt="avatar"/>
            </a>

            <nav>
                <ul>
                    <li>
                        &copy; {CopyrightYears}
                    </li>
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="/archive">Archive</a>
                    </li>

                    <li>
                        <a target="_blank" href="https://github.com/skye-trickster/tumblr-custom-theme">Credit</a>
                    </li>
                </ul>
            </nav>
        </footer>
    </body>
    
    <!-- icons from fontawesome -->
    <script src="https://kit.fontawesome.com/b293defc25.js" crossorigin="anonymous"></script>

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!--Menu Toggle-->
    <script src="https://static.tumblr.com/7ijwq6x/dg3rb6wo6/menutoggle.js" ></script>

    <script>
        const trending = document.querySelectorAll(".trending")

        function setTags(tagString) {
            if(tagString === "") return []
            let list = tagString.split(',')
            list = list.map((item) => item.trimStart().trimEnd())
            return list
        }
        const guestTags = setTags("{text:Guest Tags}")
        const mainTags = setTags("{text:Main Tags}")        
        function createTrend(trendText, trend) {
            const a = document.createElement("a")
            a.href = "/tagged/" + trendText
            const name = document.createElement("h3")
            name.innerText = trendText
            const seeTags = document.createElement("h4")
            seeTags.innerText = "see tags"
            a.appendChild(name)
            a.appendChild(seeTags)
            
            trend.querySelector(".trend-tags").appendChild(a)
            return a
        }
        if(guestTags.length === 0) {
            trending[0].style.display = "none"
        }
        else {
            guestTags.forEach((tag) => createTrend(tag, trending[0]))
        }
        
        if(mainTags.length === 0) {
            trending[1].style.display = "none"
        }
        else
            mainTags.forEach((tag) => createTrend(tag, trending[1]))
            
    </script>

    <!-- Custom Lightbox -->
    <script>
        let showDescription = false
        {block:ShowDescription}
        showDescription = true
        {/block:ShowDescription}
        
        {block:ifShowSubtext}
        showDescription = true
        {/block:ifShowSubtext}
        
        document.querySelector(".description").style.display = showDescription ? "block" : "none";
        
        function prepareImage({ src }) {
            const img = document.createElement("img")
            img.src = src;
            img.style.cssText = `
            width: initial;
            max-height: 75%;
            max-width: 75%;
            border: 2px solid var(--accent-color);
            box-shadow: -3px 3px 7px black;
            `;
            return img;
        }

        function showLightbox(images, index = 0) {
            let figure = startLightbox()

            let left = document.createElement("a")

            let right = document.createElement("a")

            let img = prepareImage(images[index])

            const setControls = () => {
                if (index === 0) {
                    left.innerHTML = " "
                    left.classList.remove("setLink")
                }
                else {
                    left.innerHTML = "<p>\<-</p>"
                    left.classList.add("setLink")
                }

                if (index >= images.length - 1) {
                    right.innerHTML = " "
                    right.classList.remove("setLink")
                }
                else {
                    right.innerHTML = "<p>-\></p>"
                    right.classList.add("setLink")
                }
            }
            setControls()

            const nextImage = () => {
                if (images.length > 1 && index < images.length - 1) {
                    index = index + 1
                    img.src = images[index].src;
                }
                setControls()
            }

            const prevImage = () => {
                if (images.length > 1 && index > 0)
                    img.src = images[--index].src
                setControls()
            }

            img.addEventListener("click", (event) => {

                const half = event.target.x + (event.target.width) / 2

                if (event.clientX < half) prevImage()
                else nextImage()
            })

            left.addEventListener("click", prevImage)
            right.addEventListener("click", nextImage)

            figure.appendChild(left);
            figure.appendChild(img);
            figure.appendChild(right);
        }

        function startLightbox() {
            const figure = document.createElement("figure");
            figure.style.cssText = `
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                position: fixed;
                display: flex;
                justify-content: space-between;
                align-items: center;
                top: 0;
                left: 0;
                z-index: 1000;
                padding: 2%;
            `;
            figure.data = {}
            figure.data.photos = []
            const body = document.querySelector('body')
            body.appendChild(figure);
            const overflow = body.style.overflow;
            body.style.overflow = "hidden";

            function hidefigure(figure) {
                body.style.overflow = overflow
                if (figure.parentNode)
                    figure.parentNode.removeChild(figure)
                document.removeEventListener("keydown", escapeKey, figure)
            }

            function escapeKey(event) { return event.key === "Escape" && hidefigure(figure) }

            figure.addEventListener("click", event => event.target === figure && hidefigure(event.target))
            document.addEventListener("keydown", escapeKey, figure)
            return figure
        }

        function figurePreview(figure) {
            const caption = figure.querySelector("figcaption");
            const image = figure.querySelector("img");

            image.addEventListener("load", (event) => {
                caption.width = `image.clientWidth`;
            })
            image.addEventListener("mouseover", () => { image.style.cursor = `pointer` });
            image.addEventListener("click", (img) => showLightbox([image]));

        }

        function photosetPreview(photoset) {
            const images = photoset.querySelectorAll("img");

            images.forEach((image, index) => {
                image.addEventListener("mouseover", () => { image.style.cursor = `pointer` });
                image.addEventListener("click", (img) => showLightbox(images, index));
            })
        }

        function main() {
            const images = document.querySelectorAll(".post-photo .featured-photo");
            images.forEach(figurePreview);

            const photosets = document.querySelectorAll(".photoset");
            photosets.forEach(photosetPreview);
        }

        document.addEventListener("DOMContentLoaded", main);
    </script>

    <script>

        const body = document.querySelector("body")
        
        function callback(mutationsList, observer) {
            mutationsList.forEach(function(mutation) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
              // handle class change
              const pushdown = "tmblr-iframe-pushdown"
              if (mutation.target.className.includes(pushdown) && screen.width > 700)
              {
                  body.style.paddingTop = "0px";
                  body.querySelector(".information").classList.add(pushdown)
                  body.querySelector(".footer").classList.add(pushdown)
              }
            }
            })

        }
        
        const mutationObserver = new MutationObserver(callback)
        mutationObserver.observe(body, {attributes:true});
    </script>
    <noscript>This page requires JavaScript.</noscript>
</html>